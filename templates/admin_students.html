{% extends "base.html" %}
{% block content %}
<h2 class="text-3xl font-bold text-blue-700 mb-6">Manage Students</h2>

<!-- Add Student Form -->
<form action="{{ url_for('admin_add_student') }}" method="post" class="bg-white shadow-md rounded-lg p-6 mb-8">
  <h3 class="text-xl font-semibold mb-4 text-gray-700">Add New Student</h3>
  <div class="grid md:grid-cols-2 gap-4">
    <div>
      <label class="block text-sm font-medium text-gray-700">Full Name</label>
      <input name="name" required class="w-full border rounded p-2" placeholder="Student Name">
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700">Roll No</label>
      <input name="roll_no" required class="w-full border rounded p-2" placeholder="e.g., 10A21">
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700">Class</label>
      <input name="student_class" required class="w-full border rounded p-2" placeholder="e.g., 10th A">
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700">Parent Name</label>
      <input name="parent_name" required class="w-full border rounded p-2" placeholder="Parent Name">
    </div>
    <div>
      <label class="block text-sm font-medium text-gray-700">Parent Phone</label>
      <input name="parent_phone" required class="w-full border rounded p-2" placeholder="1234567890">
    </div>
  </div>
  <button type="submit" class="mt-4 bg-blue-700 text-white px-6 py-2 rounded-lg hover:bg-blue-800 transition">Add Student</button>
</form>

<!-- Student List -->
<div class="bg-white shadow-md rounded-lg p-6">
  <h3 class="text-xl font-semibold mb-4 text-gray-700">All Students</h3>
  {% if students %}
  <table class="w-full border-collapse">
    <thead>
      <tr class="bg-blue-100 text-left">
        <th class="p-2 border">Roll No</th>
        <th class="p-2 border">Name</th>
        <th class="p-2 border">Class</th>
        <th class="p-2 border">Parent</th>
        <th class="p-2 border">Phone</th>
        <th class="p-2 border">Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for s in students %}
      <tr class="border-b hover:bg-gray-50">
        <td class="p-2 border">{{ s.roll_no }}</td>
        <td class="p-2 border">{{ s.name }}</td>
        <td class="p-2 border">{{ s.student_class }}</td>
        <td class="p-2 border">{{ s.parent_name }}</td>
        <td class="p-2 border">{{ s.parent_phone }}</td>
        <td class="p-2 border">
          <form action="{{ url_for('admin_delete_student', student_id=s.id) }}" method="post" onsubmit="return confirm('Are you sure?');">
            <button class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
  <p class="text-gray-500">No students found.</p>
  {% endif %}
</div>

{% endblock %}